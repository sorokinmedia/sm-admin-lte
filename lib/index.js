"use strict";function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var React=require("react"),React__default=_interopDefault(React),reactRouterDom=require("react-router-dom"),lodash=require("lodash");function createCommonjsModule(e,t){return e(t={exports:{}},t.exports),t.exports}var getOwnPropertySymbols=Object.getOwnPropertySymbols,hasOwnProperty=Object.prototype.hasOwnProperty,propIsEnumerable=Object.prototype.propertyIsEnumerable;function toObject(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function shouldUseNative(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},a=0;a<10;a++)t["_"+String.fromCharCode(a)]=a;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}var objectAssign=shouldUseNative()?Object.assign:function(e,t){for(var a,r,n=toObject(e),o=1;o<arguments.length;o++){for(var l in a=Object(arguments[o]))hasOwnProperty.call(a,l)&&(n[l]=a[l]);if(getOwnPropertySymbols){r=getOwnPropertySymbols(a);for(var c=0;c<r.length;c++)propIsEnumerable.call(a,r[c])&&(n[r[c]]=a[r[c]])}}return n},ReactPropTypesSecret="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ReactPropTypesSecret_1=ReactPropTypesSecret,printWarning=function(){},ReactPropTypesSecret$1=ReactPropTypesSecret_1,loggedTypeFailures={};function checkPropTypes(e,t,a,r,n){for(var o in e)if(e.hasOwnProperty(o)){var l;try{if("function"!=typeof e[o]){var c=Error((r||"React class")+": "+a+" type `"+o+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof e[o]+"`.");throw c.name="Invariant Violation",c}l=e[o](t,o,r,a,null,ReactPropTypesSecret$1)}catch(e){l=e}if(!l||l instanceof Error||printWarning((r||"React class")+": type specification of "+a+" `"+o+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof l+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),l instanceof Error&&!(l.message in loggedTypeFailures)){loggedTypeFailures[l.message]=!0;var s=n?n():"";printWarning("Failed "+a+" type: "+l.message+(null!=s?s:""))}}}printWarning=function(e){var t="Warning: "+e;"undefined"!=typeof console&&console.error(t);try{throw new Error(t)}catch(e){}};var checkPropTypes_1=checkPropTypes,printWarning$1=function(){};function emptyFunctionThatReturnsNull(){return null}printWarning$1=function(e){var t="Warning: "+e;"undefined"!=typeof console&&console.error(t);try{throw new Error(t)}catch(e){}};var factoryWithTypeCheckers=function(c,d){var o="function"==typeof Symbol&&Symbol.iterator,l="@@iterator";var f="<<anonymous>>",e={array:t("array"),bool:t("boolean"),func:t("function"),number:t("number"),object:t("object"),string:t("string"),symbol:t("symbol"),any:a(emptyFunctionThatReturnsNull),arrayOf:function(u){return a(function(e,t,a,r,n){if("function"!=typeof u)return new m("Property `"+n+"` of component `"+a+"` has invalid PropType notation inside arrayOf.");var o=e[t];if(!Array.isArray(o)){var l=_(o);return new m("Invalid "+r+" `"+n+"` of type `"+l+"` supplied to `"+a+"`, expected an array.")}for(var c=0;c<o.length;c++){var s=u(o,c,a,r,n+"["+c+"]",ReactPropTypesSecret_1);if(s instanceof Error)return s}return null})},element:a(function(e,t,a,r,n){var o=e[t];if(!c(o)){var l=_(o);return new m("Invalid "+r+" `"+n+"` of type `"+l+"` supplied to `"+a+"`, expected a single ReactElement.")}return null}),instanceOf:function(c){return a(function(e,t,a,r,n){if(!(e[t]instanceof c)){var o=c.name||f,l=function(e){if(!e.constructor||!e.constructor.name)return f;return e.constructor.name}(e[t]);return new m("Invalid "+r+" `"+n+"` of type `"+l+"` supplied to `"+a+"`, expected instance of `"+o+"`.")}return null})},node:a(function(e,t,a,r,n){return s(e[t])?null:new m("Invalid "+r+" `"+n+"` supplied to `"+a+"`, expected a ReactNode.")}),objectOf:function(u){return a(function(e,t,a,r,n){if("function"!=typeof u)return new m("Property `"+n+"` of component `"+a+"` has invalid PropType notation inside objectOf.");var o=e[t],l=_(o);if("object"!==l)return new m("Invalid "+r+" `"+n+"` of type `"+l+"` supplied to `"+a+"`, expected an object.");for(var c in o)if(o.hasOwnProperty(c)){var s=u(o,c,a,r,n+"."+c,ReactPropTypesSecret_1);if(s instanceof Error)return s}return null})},oneOf:function(s){if(!Array.isArray(s))return printWarning$1("Invalid argument supplied to oneOf, expected an instance of array."),emptyFunctionThatReturnsNull;return a(function(e,t,a,r,n){for(var o=e[t],l=0;l<s.length;l++)if(u(o,s[l]))return null;var c=JSON.stringify(s);return new m("Invalid "+r+" `"+n+"` of value `"+o+"` supplied to `"+a+"`, expected one of "+c+".")})},oneOfType:function(c){if(!Array.isArray(c))return printWarning$1("Invalid argument supplied to oneOfType, expected an instance of array."),emptyFunctionThatReturnsNull;for(var e=0;e<c.length;e++){var t=c[e];if("function"!=typeof t)return printWarning$1("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+r(t)+" at index "+e+"."),emptyFunctionThatReturnsNull}return a(function(e,t,a,r,n){for(var o=0;o<c.length;o++){var l=c[o];if(null==l(e,t,a,r,n,ReactPropTypesSecret_1))return null}return new m("Invalid "+r+" `"+n+"` supplied to `"+a+"`.")})},shape:function(i){return a(function(e,t,a,r,n){var o=e[t],l=_(o);if("object"!==l)return new m("Invalid "+r+" `"+n+"` of type `"+l+"` supplied to `"+a+"`, expected `object`.");for(var c in i){var s=i[c];if(s){var u=s(o,c,a,r,n+"."+c,ReactPropTypesSecret_1);if(u)return u}}return null})},exact:function(p){return a(function(e,t,a,r,n){var o=e[t],l=_(o);if("object"!==l)return new m("Invalid "+r+" `"+n+"` of type `"+l+"` supplied to `"+a+"`, expected `object`.");var c=objectAssign({},e[t],p);for(var s in c){var u=p[s];if(!u)return new m("Invalid "+r+" `"+n+"` key `"+s+"` supplied to `"+a+"`.\nBad object: "+JSON.stringify(e[t],null,"  ")+"\nValid keys: "+JSON.stringify(Object.keys(p),null,"  "));var i=u(o,s,a,r,n+"."+s,ReactPropTypesSecret_1);if(i)return i}return null})}};function u(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function m(e){this.message=e,this.stack=""}function a(u){var i={},p=0;function e(e,t,a,r,n,o,l){if(r=r||f,o=o||a,l!==ReactPropTypesSecret_1){if(d){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}if("undefined"!=typeof console){var s=r+":"+a;!i[s]&&p<3&&(printWarning$1("You are manually calling a React.PropTypes validation function for the `"+o+"` prop on `"+r+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."),i[s]=!0,p++)}}return null==t[a]?e?null===t[a]?new m("The "+n+" `"+o+"` is marked as required in `"+r+"`, but its value is `null`."):new m("The "+n+" `"+o+"` is marked as required in `"+r+"`, but its value is `undefined`."):null:u(t,a,r,n,o)}var t=e.bind(null,!1);return t.isRequired=e.bind(null,!0),t}function t(c){return a(function(e,t,a,r,n,o){var l=e[t];return _(l)!==c?new m("Invalid "+r+" `"+n+"` of type `"+i(l)+"` supplied to `"+a+"`, expected `"+c+"`."):null})}function s(e){switch(typeof e){case"number":case"string":case"undefined":return!0;case"boolean":return!e;case"object":if(Array.isArray(e))return e.every(s);if(null===e||c(e))return!0;var t=function(e){var t=e&&(o&&e[o]||e[l]);if("function"==typeof t)return t}(e);if(!t)return!1;var a,r=t.call(e);if(t!==e.entries){for(;!(a=r.next()).done;)if(!s(a.value))return!1}else for(;!(a=r.next()).done;){var n=a.value;if(n&&!s(n[1]))return!1}return!0;default:return!1}}function _(e){var t,a=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":(t=e,"symbol"===a||"Symbol"===t["@@toStringTag"]||"function"==typeof Symbol&&t instanceof Symbol?"symbol":a)}function i(e){if(null==e)return""+e;var t=_(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function r(e){var t=i(e);switch(t){case"array":case"object":return"an "+t;case"boolean":case"date":case"regexp":return"a "+t;default:return t}}return m.prototype=Error.prototype,e.checkPropTypes=checkPropTypes_1,e.PropTypes=e},propTypes=createCommonjsModule(function(e){var t="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;e.exports=factoryWithTypeCheckers(function(e){return"object"==typeof e&&null!==e&&e.$$typeof===t},!0)});function Footer(e){return e.isShow?React__default.createElement("footer",{className:"main-footer"},e.children):null}function HeaderAuth(e){return React__default.createElement("ul",{className:"nav navbar-nav"},React__default.createElement("li",null,React__default.createElement(reactRouterDom.Link,{to:"/auth/login"},"Войти")),React__default.createElement("li",null,React__default.createElement(reactRouterDom.Link,{to:"/auth/signup"},"Регистрация")))}function HeaderDropdown(e){var t=e.items,a=e.title,r=e.icon,n=e.name,o=e.count,l=e.countIcon;return React__default.createElement("li",{className:"notifications-menu dropdown"},React__default.createElement("a",{href:"#",className:"dropdown-toggle","data-toggle":"dropdown",id:n},React__default.createElement("i",{className:r,title:a}),void 0!==o&&React__default.createElement("span",{className:l},o)),React__default.createElement("ul",{className:"dropdown-menu","aria-labelledby":n},React__default.createElement("li",null,React__default.createElement("ul",{className:"menu"},t.map(function(e){var t=e.href,a=e.title,r=e.icon;return React__default.createElement("li",{key:t},React__default.createElement(reactRouterDom.Link,{to:t},r&&React__default.createElement("i",{className:r}),a))})))))}function HeaderUserProfile(e){var t=e.userName,a=e.avatar;return React__default.createElement("li",{className:"user user-menu dropdown"},React__default.createElement("a",{href:"#",className:"dropdown-toggle","data-toggle":"dropdown"},React__default.createElement("span",{className:"hidden-xs"},t),React__default.createElement("img",{className:"user-image",src:a,alt:t})),React__default.createElement("ul",{className:"dropdown-menu"},React__default.createElement("li",{className:"user-header dropdown-header"},React__default.createElement("img",{className:"image-circle",src:a,alt:t}),React__default.createElement("p",null,t)),React__default.createElement("li",{className:"user-footer dropdown-header"},React__default.createElement("div",{className:"pull-left"},React__default.createElement(reactRouterDom.Link,{className:"btn btn-default btn-flat",to:"/user/profile/index"},"Профиль")),React__default.createElement("div",{className:"pull-right"},React__default.createElement("a",{className:"btn btn-default btn-flat",href:"/user/default/logout",onClick:e.handleLogout},"Выйти")))))}Footer.propTypes={children:propTypes.node,isShow:propTypes.bool},HeaderDropdown.propTypes={items:propTypes.array.isRequired,title:propTypes.string,icon:propTypes.string.isRequired,name:propTypes.string,count:propTypes.number,countIcon:propTypes.string},HeaderUserProfile.propTypes={handleLogout:propTypes.func,userName:propTypes.string,avatar:propTypes.string};var classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},createClass=function(){function r(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,a){return t&&r(e.prototype,t),a&&r(e,a),e}}(),_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},inherits=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},possibleConstructorReturn=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},toConsumableArray=function(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)},ProjectSearch=function(e){function t(){classCallCheck(this,t);var a=possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));a.searchHandler=function(e){var t=e.target.elements.input.value;e.preventDefault(),a.setState({searchRequested:!0,projectId:t}),a.props.searchResult(t)};var e={searchRequested:!(a.hideMessages=function(){a.setState({noResult:!1})}),projectId:null,redirect:null};return a.state=_extends({},e),a.initialState=_extends({},e),a}return inherits(t,e),createClass(t,[{key:"componentDidMount",value:function(){document.addEventListener("click",this.hideMessages,!1)}},{key:"componentWillReceiveProps",value:function(e){var t=e.searchProject,a=this.state,r=a.projectId;a.searchRequested&&void 0!==t.data&&(this.setState({searchRequested:!1,projectId:null}),t.data&&this.setState({redirect:"/project/project/view?id="+r}))}},{key:"componentDidUpdate",value:function(){var e=this.state.redirect,t=location;!t.pathname+t.search!==e&&e&&this.setState(_extends({},this.initialState))}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.hideMessages,!1)}},{key:"render",value:function(){var e=this.state.redirect,t=this.props.searchProject;return React__default.createElement("div",{className:"header-search"},e?React__default.createElement(reactRouterDom.Redirect,{to:e}):"",React__default.createElement("form",{onSubmit:this.searchHandler},React__default.createElement("input",{className:"form-control",name:"input",placeholder:"Найти проект по ID"})),t.message&&100===t.serverStatus?React__default.createElement("div",{className:"header-search-message"},t.message):"")}}]),t}(React.Component);ProjectSearch.propTypes={isAuthorized:propTypes.bool,searchResult:propTypes.func,searchProject:propTypes.object};var Header=function(e){function a(e){classCallCheck(this,a);var t=possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.handleLogout=function(e){e.preventDefault(),t.props.logout()},t.renderHeaderItems=function(e){return e.map(function(e){var t=e.name,a=e.render,r=e.className,n=e.dropdown;return n?React__default.createElement(HeaderDropdown,_extends({},n,{key:t})):React__default.createElement("li",{key:t,className:r},a())})},t.state={},t}return inherits(a,e),createClass(a,[{key:"render",value:function(){var e=this.props.setup,t=e.isShow,a=(e.site,e.search),r=e.dropdown,n=e.logo,o=e.logoMini,l=e.userProfileLink;if(!t)return null;var c=this.props,s=c.menuItemsAfter,u=void 0===s?[]:s,i=c.menuItemsBefore,p=void 0===i?[]:i,d=c.userName,f=c.avatar,m=c.className,_=c.isAuthorized;return React__default.createElement("header",{className:"main-header "+m},React__default.createElement(reactRouterDom.Link,{to:"/",className:"logo"},React__default.createElement("span",{className:"logo-mini"},React__default.createElement("img",{src:o,alt:"Cabinet"})),React__default.createElement("span",{className:"logo-lg"},React__default.createElement("img",{src:n,alt:"Cabinet",id:"logo"}))),React__default.createElement("nav",{className:"navbar navbar-static-top"},React__default.createElement("a",{href:"#",className:"sidebar-toggle","data-toggle":"push-menu",role:"button"},React__default.createElement("span",{className:"sr-only"},"Toggle navigation")),_&&a?React__default.createElement(ProjectSearch,{searchResult:this.props.searchResult,searchProject:this.props.searchProject}):"",React__default.createElement("div",{className:"navbar-custom-menu pull-right"},_?React__default.createElement("ul",{className:"nav navbar-nav"},this.renderHeaderItems(p),React__default.createElement(HeaderUserProfile,{userName:d,avatar:f,handleLogout:this.handleLogout,userProfileLink:l}),r&&this.renderHeaderItems(u)):React__default.createElement(HeaderAuth,null))))}}]),a}(React.Component);Header.propTypes={menuItemsAfter:propTypes.array,menuItemsBefore:propTypes.array,setup:propTypes.object,searchResult:propTypes.func,logout:propTypes.func,searchProject:propTypes.object,userName:propTypes.string,avatar:propTypes.string,className:propTypes.string,isAuthorized:propTypes.bool};var iconLink=function(e,t){var a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return React__default.createElement("a",_extends({href:e},a),React__default.createElement("i",{className:t}))},LinkRouter=function(e,t){var a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return React__default.createElement(reactRouterDom.Link,_extends({to:e},a),React__default.createElement("i",{className:t}))};function adminItems(e){return[{name:"userlist",render:function(){return iconLink("/user/default/index","fa fa-users text-black")}},{name:"backend",render:function(){return iconLink("course"!==e?"http://backend.sorokin.kosmoz.online":"","fa fa-cogs text-black")}}]}function supportItems(){return[{name:"billing",render:function(){return LinkRouter("/billing/default/index#orders","fa fa-dollar")}}]}function getMenuItemsBefore(e){var t=e.notifications,a=e.role,r=e.header,n=r.site,o=r.links,l=o.all,c=void 0===l?"/notificator/default/index":l,s=o.setup,u=void 0===s?"/user/profile/notifications":s,i=e.is_support,p="Администратор"===a,d="Саппорт"===a,f=[{name:"notifications",dropdown:{title:"Непрочитанных уведомлений "+t,icon:"fa fa-bell-o",count:t,countIcon:"label label-warning",items:[{title:"Все уведомления",href:c,icon:"fa fa-envelope-o text-green"},{title:"Настройка уведомлений",href:u,icon:"fa fa-sliders text-green"}],name:"notifications"}},{name:"billing",site:"course",dropdown:{icon:"fa fa-dollar",items:[{title:"Ваш счет",href:"/billing",icon:"fa fa-money text-green"}],name:"billing"}}].filter(function(e){return e.site!==n});return[].concat(toConsumableArray(p?adminItems(n):[]),toConsumableArray(d&&i?supportItems():""),toConsumableArray(f))}function getMenuItemsAfter(){return[{name:"support",dropdown:{title:"Тех. поддержка",icon:"fa fa-question-circle-o",items:[{href:"/user/ticket/index",title:"Мои тикеты"}],name:"support"}},{name:"folders",render:function(){return iconLink("#","fa fa-gears",{"data-toggle":"control-sidebar"})}}]}function getCookie(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}var menuDecorator=function(a,r){return function(e){function t(){return classCallCheck(this,t),possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return inherits(t,e),createClass(t,[{key:"render",value:function(){var e=this.props.menus,t=r.menuId;return e.includes(t)?React__default.createElement(a,this.props):null}}]),t}(React__default.Component)};function SidebarLink(e){e.path,e.to;var t=e.className;return React__default.createElement(reactRouterDom.NavLink,_extends({},e,{className:t}),e.children)}function CourseAdminMenu(e){var t=getCookie("auth_token_main"),a=React__default.createElement("li",null,React__default.createElement(SidebarLink,{to:"/user/default/index",onClick:e.onLink,match:e.match.path},React__default.createElement("i",{className:"fa fa-users text-green"}),React__default.createElement("span",null,"Пользователи")));return React__default.createElement("ul",{className:"sidebar-menu tree"},React__default.createElement("li",{className:"header"},React__default.createElement("span",null,React__default.createElement("span",null,"Админ меню"))),t?"":a,React__default.createElement("li",null,React__default.createElement("a",{href:"https://backend.101kurs.com",target:"_blank",rel:"noopener noreferrer"},React__default.createElement("i",{className:"fa fa-cogs text-green"}),React__default.createElement("span",null,"Бэкенд"))))}SidebarLink.propTypes={className:propTypes.string,to:propTypes.string,path:propTypes.string,children:propTypes.node},CourseAdminMenu.propTypes={isUserViewCourse:propTypes.string,match:propTypes.object,back:propTypes.func,onLink:propTypes.func};var CourseAdminMenu$1=menuDecorator(CourseAdminMenu,{menuId:"admin"});function CourseLearnerMenu(e){return React__default.createElement("ul",{className:"sidebar-menu tree"},React__default.createElement("li",{className:"header"},React__default.createElement("span",null,React__default.createElement("span",null,"Меню ученика "))),React__default.createElement("li",null,React__default.createElement(SidebarLink,{to:"/learner/course/my",onClick:e.onLink,match:e.match.path},React__default.createElement("i",{className:"fa fa-graduation-cap"}),React__default.createElement("span",null,"Мои курсы"),e.courseCount?React__default.createElement("span",{className:"pull-right-container"},React__default.createElement("small",{className:"label pull-right bg-green"},e.myCourseCount)):"")),React__default.createElement("li",null,React__default.createElement(SidebarLink,{to:"/learner/product/index",onClick:e.onLink,match:e.match.path},React__default.createElement("i",{className:"fa fa-book"}),React__default.createElement("span",null,"Все товары"),e.courseCount?React__default.createElement("span",{className:"pull-right-container"},React__default.createElement("small",{className:"label pull-right bg-primary"},e.courseCount)):"")))}CourseLearnerMenu.propTypes={isUserViewCourse:propTypes.bool,match:propTypes.object,myCourseCount:propTypes.number,courseCount:propTypes.number,back:propTypes.func,onLink:propTypes.func};var CourseLearnerMenu$1=menuDecorator(CourseLearnerMenu,{menuId:"learner"});function CourseSupportMenu(e){return React__default.createElement("ul",{className:"sidebar-menu tree"},React__default.createElement("li",{className:"header"},React__default.createElement("span",null,React__default.createElement("span",null,"Саппорт меню"))),React__default.createElement("li",null,React__default.createElement(SidebarLink,{to:"/support/dashboard/",onClick:e.onLink,match:e.match.path},React__default.createElement("i",{className:"fa fa-dashboard text-green"}),React__default.createElement("span",null,"Главный экран"))))}CourseSupportMenu.propTypes={isUserViewCourse:propTypes.bool,match:propTypes.object,back:propTypes.func,onLink:propTypes.func};var CourseSupportMenu$1=menuDecorator(CourseSupportMenu,{menuId:"support"});function CourseMenu(e){e.isUserViewCourse;var t=e.leftMenu,a=e.match,r=e.onLink,n=e.back,o=e.sidebar;return React__default.createElement(React.Fragment,null,React__default.createElement(CourseAdminMenu$1,{menus:t.data.menus,match:a,onLink:r,back:n}),React__default.createElement(CourseSupportMenu$1,{menus:t.data.menus,match:a,onLink:r}),React__default.createElement(CourseLearnerMenu$1,{courseCount:o.courseCount,myCourseCount:o.myCourseCount,menus:t.data.menus,match:a,onLink:r}))}function AdminMenu(e){var t=this,a=getCookie("auth_token_main");return React__default.createElement(React.Fragment,null,a?React__default.createElement("ul",{className:"sidebar-menu tree"},React__default.createElement("li",null,React__default.createElement("a",{className:"hovered",onClick:function(){return t.props.back()}},React__default.createElement("i",{className:"fa fa-undo text-green"}),React__default.createElement("span",null,"Вернуться в основного")))):"",React__default.createElement("ul",{className:"sidebar-menu tree"},React__default.createElement("li",{className:"header"},"Админ меню"),React__default.createElement("li",null,React__default.createElement("a",{href:"https://backend.sorokin.space",target:"_blank",rel:"noopener noreferrer"},React__default.createElement("i",{className:"fa fa-cogs text-green"}),React__default.createElement("span",null,"Бэкенд"))),React__default.createElement("li",null,React__default.createElement(SidebarLink,{to:"/user/default/index",onClick:e.onLink,match:e.match.path},React__default.createElement("i",{className:"fa fa-users text-green"}),React__default.createElement("span",null,"Пользователи")))))}CourseMenu.propTypes={leftMenu:propTypes.object.isRequired,onLink:propTypes.func.isRequired,back:propTypes.func.isRequired,match:propTypes.object.isRequired,isUserViewCourse:propTypes.string,sidebar:propTypes.shape({courseCount:propTypes.number,myCourseCount:propTypes.number})},CourseMenu.defaultProps={},AdminMenu.propTypes={match:propTypes.object,onLink:propTypes.func};var AdminMenu$1=menuDecorator(AdminMenu,{menuId:"admin"});function AnalyticMenu(e){return React__default.createElement("ul",{className:"sidebar-menu tree"},React__default.createElement("li",{className:"header"},"Основное меню"),React__default.createElement("li",null,React__default.createElement(reactRouterDom.NavLink,{to:"/",onClick:e.onLink},React__default.createElement("i",{className:"fa fa-home text-green"}),React__default.createElement("span",{className:"main-link"},"Главная"))),React__default.createElement("li",null,React__default.createElement(reactRouterDom.NavLink,{to:"/sites/site/index",onClick:e.onLink},React__default.createElement("i",{className:"fa fa-sitemap text-green"}),React__default.createElement("span",null,"Рабочие сайты "))),React__default.createElement("li",null,React__default.createElement(reactRouterDom.NavLink,{to:"/project/default/index",onClick:e.onLink},React__default.createElement("i",{className:"fa fa-dashboard text-green"}),React__default.createElement("span",null,"Все проекты"))))}AnalyticMenu.propTypes={onLink:propTypes.func};var AnalyticMenu$1=menuDecorator(AnalyticMenu,{menuId:"analytic"});function AnalyticToolsMenu(e){return React__default.createElement("ul",{className:"sidebar-menu tree"},React__default.createElement("li",{className:"header"},"Интсрументы"),React__default.createElement("li",null,React__default.createElement(reactRouterDom.NavLink,{to:"/sites/site/find-semantic-item",onClick:e.onLink},React__default.createElement("i",{className:"fa fa-table text-green"}),React__default.createElement("span",null,"Найти блок семантики"))),React__default.createElement("li",null,React__default.createElement(reactRouterDom.NavLink,{to:"/project/default/find-project",onClick:e.onLink},React__default.createElement("i",{className:"fa fa-product-hunt text-green"}),React__default.createElement("span",null,"Найти проект по WHO"))),React__default.createElement("li",null,React__default.createElement(reactRouterDom.NavLink,{to:"/project/default/find-project-by-name",onClick:e.onLink},React__default.createElement("i",{className:"fa fa-product-hunt text-green"}),React__default.createElement("span",null,"Найти проект по названию"))))}AnalyticToolsMenu.propTypes={onLink:propTypes.func};var AnalyticToolsMenu$1=menuDecorator(AnalyticToolsMenu,{menuId:"analytic_tools"});function ManagerMenu(t){var e=t.sites;return React__default.createElement("ul",{className:"sidebar-menu tree"},React__default.createElement("li",{className:"header"},"Меню руководителя"),React__default.createElement("li",null,React__default.createElement(reactRouterDom.NavLink,{to:"/manager/costs",onClick:t.onLink},React__default.createElement("i",{className:"fa fa-money text-aqua"}),React__default.createElement("span",null,"ЗП аналитики"))),React__default.createElement("li",null,React__default.createElement(reactRouterDom.NavLink,{to:"/manager/project/index",onClick:t.onLink},React__default.createElement("i",{className:"fa fa-line-chart text-green"}),React__default.createElement("span",null,"Общие данные"))),e?React__default.createElement("ul",{className:"sidebar-menu tree"},e.map(function(e){return React__default.createElement("li",{key:e.id},React__default.createElement(reactRouterDom.NavLink,{to:"/manager/project/single?site_id="+e.id,onClick:t.onLink},React__default.createElement("i",{className:"fa fa-globe text-green"}),React__default.createElement("span",null,e.name)))})):"")}ManagerMenu.propTypes={sites:propTypes.array,onLink:propTypes.func};var ManagerMenu$1=menuDecorator(ManagerMenu,{menuId:"manager"});function MonetizerMenu(e){return React__default.createElement("ul",{className:"sidebar-menu tree"},React__default.createElement("li",{className:"header"},"Меню монетизатора"),React__default.createElement("li",null,React__default.createElement(reactRouterDom.NavLink,{to:"/ads",onClick:e.onLink},React__default.createElement("i",{className:"fa fa-object-ungroup text-blue"}),React__default.createElement("span",null,"Работа с рекламой"))))}MonetizerMenu.propTypes={onLink:propTypes.func};var MonetizerMenu$1=menuDecorator(MonetizerMenu,{menuId:"monetizer"});function SpaceMenu(e){var t=e.leftMenu,a=e.match,r=e.onLink;return React__default.createElement(React.Fragment,null,React__default.createElement(AdminMenu$1,{menus:t.data.menus,onLink:r,match:a}),React__default.createElement(AnalyticMenu$1,{menus:t.data.menus,onLink:r,match:a}),React__default.createElement(AnalyticToolsMenu$1,{menus:t.data.menus,onLink:r,match:a}),React__default.createElement(ManagerMenu$1,{menus:t.data.menus,sites:t.data.sites,onLink:r,match:a}),React__default.createElement(MonetizerMenu$1,{menus:t.data.menus,onLink:r,match:a}))}SpaceMenu.propTypes={leftMenu:propTypes.object.isRequired,onLink:propTypes.func.isRequired,match:propTypes.object.isRequired},SpaceMenu.defaultProps={};var Sidebar=function(e){function t(e){classCallCheck(this,t);var l=possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return l.onLink=function(){document.documentElement.scrollTop=0},l.menu=function(){var e=l.props,t=e.leftMenu,a=e.sidebar,r=e.match,n=e.back,o=getCookie("auth_token_main");switch(a.menu){case"course":return React__default.createElement(React.Fragment,null,o?React__default.createElement("ul",{className:"sidebar-menu tree"},React__default.createElement("li",{className:"header"},React__default.createElement("span",null,React__default.createElement("span",null,"Админ меню"))),React__default.createElement("li",null,React__default.createElement("a",{className:"hovered",onClick:function(){return n()}},React__default.createElement("i",{className:"fa fa-undo text-green"}),React__default.createElement("span",null,"На основного")))):"",React__default.createElement(CourseMenu,{sidebar:a,onLink:l.onLink,match:r,back:n,leftMenu:t}));case"space":return React__default.createElement(SpaceMenu,{leftMenu:t,match:r,onLink:l.onLink});default:return React__default.createElement("div",null,"default")}},l.asideRef=React__default.createRef(),l}return inherits(t,e),createClass(t,[{key:"componentDidUpdate",value:function(){if(this.asideRef){var e=this.asideRef.clientHeight;document.querySelector(".content-wrapper").style.minHeight=e+"px"}}},{key:"render",value:function(){if(!this.props.sidebar.isShow)return null;var e=this.props,t=e.avatar,a=e.userName,r=e.leftMenu;return lodash.get(r,"data")?React__default.createElement("aside",{className:"main-sidebar",ref:this.asideRef},React__default.createElement("section",{className:"sidebar"},React__default.createElement("div",{className:"user-panel",style:{color:"#fff"}},React__default.createElement("div",{className:"pull-left image"},React__default.createElement("img",{src:t,className:"img-circle",alt:a})),React__default.createElement("div",{className:"pull-left info"},React__default.createElement("p",null,a),React__default.createElement("a",{href:"#"},React__default.createElement("i",{className:"fa fa-circle text-success"}),"Online"))),this.menu())):null}}]),t}(React.Component);function SidebarRight(e){return e.isShow?React__default.createElement("aside",{className:"control-sidebar control-sidebar-dark"},React__default.createElement("ul",{className:"nav nav-tabs nav-justified control-sidebar-tabs"},React__default.createElement("li",{className:"active"},React__default.createElement("a",{href:"#control-sidebar-folders-tab","data-toggle":"tab"},React__default.createElement("i",{className:"fa fa-folder"})))),React__default.createElement("div",{className:"tab-content"},React__default.createElement("h3",{className:"control-sidebar-heading"},React__default.createElement(reactRouterDom.Link,{to:"/user/project-folder/index",onClick:e.handleClick},"Управление папками")))):null}function styleInject(e,t){void 0===t&&(t={});var a=t.insertAt;if(e&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css","top"===a&&r.firstChild?r.insertBefore(n,r.firstChild):r.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}}Sidebar.displayName="Sidebar",Sidebar.propTypes={avatar:propTypes.string,site:propTypes.string,back:propTypes.func,leftMenu:propTypes.object,sidebar:propTypes.shape({isShow:propTypes.bool,menu:propTypes.string}),match:propTypes.object,userName:propTypes.string},SidebarRight.propTypes={handleClick:propTypes.func.isRequired,isShow:propTypes.bool};var css=".wrapper {\n\theight: auto;\n\tmin-height: 100%\n}\n.app-wrapper {\n\toverflow: hidden\n}\n";styleInject(css);var AppWrapper=function(e){function v(){var e,t,a;classCallCheck(this,v);for(var r=arguments.length,n=Array(r),o=0;o<r;o++)n[o]=arguments[o];return(t=a=possibleConstructorReturn(this,(e=v.__proto__||Object.getPrototypeOf(v)).call.apply(e,[this].concat(n)))).handleClick=function(){document.querySelector('[data-toggle="control-sidebar"]').click()},possibleConstructorReturn(a,t)}return inherits(v,e),createClass(v,[{key:"render",value:function(){var e=this.props,t=e.userData,a=e.match,r=e.header,n=e.footer,o=e.sidebar,l=e.sidebarRight,c=e.appWrapper.style,s=t.data,u=void 0===s?{}:s,i=t.error,p=u.notifications,d=u.avatar,f=void 0===d?"https://www.gravatar.com/avatar/dc36f5a91f271af325184ece55b5dbd5?r=g&s=45":d,m=u.username,_=u.is_support,y=u.jivosite,h=u.role,R="Администратор"===h,b=getMenuItemsBefore({notifications:p,role:h,header:r,is_support:_}),g=getMenuItemsAfter();return v.displayName=v.displayName||v.name||"AppWrapper",React__default.createElement("div",{className:"app-wrapper "+this.props.wrapClass,style:{style:c}},React__default.createElement("div",{className:"wrapper"},React__default.createElement(Header,{avatar:f,className:"class-name",setup:r,logout:this.props.logout,menuItemsBefore:b,menuItemsAfter:g,isAuthorized:!i,isAdmin:R,searchResult:this.props.searchResult,searchProject:this.props.searchProject,userName:m}),React__default.createElement(Sidebar,{sidebar:this.props.sidebar,avatar:f,userName:m,match:a,back:this.props.backIntoMainUser,courseMenu:this.props.courseMenu,leftMenu:this.props.leftMenu}),React__default.createElement("section",{className:"content-wrapper"},this.props.children),React__default.createElement(Footer,{isShow:n.isShow},React__default.createElement("div",{className:"pull-left"},React__default.createElement("div",{className:"ft_copy"},"© Sorokin.Media 2017-2018")),React__default.createElement("div",{className:"pull-right"},React__default.createElement("div",{className:"ft_logo"},React__default.createElement("img",{src:n.footerLogo,alt:"Cabinet"}))),y?function(){var e=document,t=window;function a(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//code.jivosite.com/script/widget/m7KxeJ82jO";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}"complete"==e.readyState?a():t.attachEvent?t.attachEvent("onload",a):t.addEventListener("load",a,!1)}():null),React__default.createElement(SidebarRight,{handleClick:this.handleClick,isShow:l}),o&&React__default.createElement("div",{className:"control-sidebar-bg"})))}}]),v}(React.Component);AppWrapper.propTypes={userData:propTypes.object.isRequired,match:propTypes.object,searchProject:propTypes.object,leftMenu:propTypes.object,wrapClass:propTypes.string,children:propTypes.node,courseMenu:propTypes.bool,header:propTypes.object,sidebar:propTypes.object,sidebarRight:propTypes.bool,appWrapper:propTypes.object,footer:propTypes.shape({footerLogo:propTypes.string,isShow:propTypes.bool}),backIntoMainUser:propTypes.func,logout:propTypes.func,searchResult:propTypes.func},AppWrapper.defaultProps={searchProject:{},wrapClass:"",searchResult:function(){},courseMenu:!1,header:!1,sidebar:!1,sidebarRight:!1,footer:!1,appWrapper:{style:{paddingTop:"15px"}}},exports.AppWrapper=AppWrapper,exports.Header=Header,exports.Sidebar=Sidebar,exports.SidebarRight=SidebarRight,exports.Footer=Footer;
